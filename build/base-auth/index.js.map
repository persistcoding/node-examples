{"version":3,"sources":["../../source/base-auth/index.js"],"names":["userInfo","name","pass","server","createServer","req","res","user","statusCode","setHeader","end","e","module","parent","listen","console","log"],"mappings":";;;;;;AAAA;;;;AAEA;;;;;;AAGA,MAAMA,WAAW;AACfC,QAAM,KADS;AAEfC,QAAM;AAFS,CAAjB;;AAKA,MAAMC,SAAS,eAAKC,YAAL,CAAkB,CAACC,GAAD,EAAMC,GAAN,KAAc;;AAE7C,MAAI;;AAEF,UAAMC,OAAO,oBAAKF,GAAL,CAAb;;AAEA;;AAEA,QAAGE,QAAQA,KAAKN,IAAL,IAAaD,SAASC,IAA9B,IAAsCM,KAAKL,IAAL,IAAaF,SAASE,IAA/D,EAAqE;;AAEnEI,UAAIE,UAAJ,GAAiB,GAAjB;AACAF,UAAIG,SAAJ,CAAc,cAAd,EAA8B,YAA9B;AACAH,UAAII,GAAJ,CAAQ,QAAR;AAED,KAND,MAMO;;AAELJ,UAAIE,UAAJ,GAAiB,GAAjB;AACAF,UAAIG,SAAJ,CAAc,cAAd,EAA8B,YAA9B;AACA;AACAH,UAAIG,SAAJ,CAAc,kBAAd,EAAkC,OAAlC;AACAH,UAAII,GAAJ,CAAQ,qBAAR;AAED;AAIF,GAxBD,CAwBE,OAAOC,CAAP,EAAU;;AAEV,UAAMA,CAAN;AAED;AAGF,CAjCc,CAAf;;AAoCA,IAAG,CAACC,OAAOC,MAAX,EAAmB;AACjBV,SAAOW,MAAP,CAAc,IAAd,EAAoB,MAAMC,QAAQC,GAAR,CAAY,6BAAZ,CAA1B;AACD;;kBAEcb,M","file":"index.js","sourcesContent":["import http from 'http'\n\nimport auth from './auth'\n\n\nconst userInfo = {\n  name: 'tim',\n  pass: '111'\n}\n\nconst server = http.createServer((req, res) => {\n\n  try {\n\n    const user = auth(req)\n\n    // 收到的basic auth信息的头部是 authorization\n\n    if(user && user.name == userInfo.name && user.pass == userInfo.pass) {\n\n      res.statusCode = 200;\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      res.end(\"secret\");\n\n    } else {\n\n      res.statusCode = 401;\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      // status:401, 设置 WWW-Authenticate 返回头部，就会弹用户名/密码窗\n      res.setHeader(\"WWW-Authenticate\", \"Basic\");\n      res.end(\"we do not know you.\");\n\n    }\n\n\n\n  } catch (e) {\n\n    throw e\n\n  }\n\n\n})\n\n\nif(!module.parent) {\n  server.listen(3000, () => console.log('server running at port 3000'))\n}\n\nexport default server\n"]}